<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Điều khiển đèn</title>
        <link rel="icon" href="data:image/png;base64,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"/>
        <style>
            button#light-btn {
                width: 100px;
                height: 100px;
                border: none;
                border-radius: 50%;
                transition: all 200ms;
                margin: 100px;
                text-align: center;
                font-weight: bold;
                font-size: 2em;
            }
            button.light-btn-on {
                transform: scale(2);
                background: #ffffff;
                box-shadow: 0px 0px 30px 0px rgba(0, 0, 0, 0.3);
            }
            button.light-btn-off {
                transform: scale(1);
                background: #666666;
                box-shadow: 0px 0px 30px 0px #ffffff;
                color: #ffffff;
            }
            #button-container {
                text-align: center;
                position: absolute;
                bottom: 0px;
                width: 100%;
            }
            body {
                margin: 0px;
                padding: 0px;
            }
        </style>
    </head>
    <body>
        <div id="button-container">
            <button id="light-btn">1</button>
            <button id="light-btn">2</button>
        </div>
        <script type="text/javascript">
            var btn_lights = document.querySelectorAll('#light-btn');
            var timer_id = 0;
            function GetRelayStatus()
            {
                var xhr = new XMLHttpRequest();
                xhr.open('get', 'getrelaystatus', false);
                xhr.send();
                return xhr.response;
            }
            function SetRelayStatus(pin, status)
            {
                var xhr = new XMLHttpRequest();
                xhr.open('get', (status ? 'relayon' : 'relayoff') + pin);
                xhr.send();
            }
            for (var i = 0; i < btn_lights.length; ++i)
            {
                btn_lights[i].pin = i;
                btn_lights[i].onclick = function(e)
                {
                    SetRelayStatus(this.pin, this.className == 'light-btn-on' ? false : true);
                    RefreshButton();
                }
            }
            function RefreshButton()
            {
                var states = GetRelayStatus();
                for (var i = 0; i < btn_lights.length; i++)
                {
                    btn_lights[i].className = states[i] == '1' ? 'light-btn-on' : 'light-btn-off';
                }
            }
            function SetupTimer()
            {
                return setInterval(function(e)
                {
                    RefreshButton();
                }, 200);
            }
            (function Initialize()
            {
                RefreshButton();
                window.onfocus = function(e)
                {
                    if (!timer_id)
                    {
                        timer_id = SetupTimer();
                    }
                };
                window.onblur = function(e)
                {
                    clearInterval(timer_id);
                    timer_id = 0;
                };
                if (!timer_id)
                {
                    timer_id = SetupTimer();
                }
            })();
        </script>
    </body>
</html>
